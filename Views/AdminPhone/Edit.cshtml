@model TelefonOzellikleri.Models.Smartphone
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    var brandList = ViewData["BrandList"] as Microsoft.AspNetCore.Mvc.Rendering.SelectList;
    var seriesList = ViewData["SeriesList"] as Microsoft.AspNetCore.Mvc.Rendering.SelectList;
    var isNew = ViewData["IsNew"] as bool? ?? false;
}

@section Styles {
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" rel="stylesheet" />
}

@if (ViewData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @ViewData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

<form method="post" action="@(isNew ? "/derin/phones/create" : $"/derin/phones/edit/{Model.Id}")" id="phoneForm">
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="Id" />

    @if (!isNew)
    {
        <div class="mb-3">
            <label class="form-label">ID</label>
            <input asp-for="Id" class="form-control" readonly disabled style="max-width: 120px;" />
        </div>
    }

    <ul class="nav nav-tabs mb-3" id="phoneTabs" role="tablist">
        <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#tab-general">General</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-design">Design</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-display">Display</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-camera">Camera</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-security">Security</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-hardware">Hardware</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-software">Software</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-battery">Battery</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-network">Network</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-connectivity">Connectivity</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-other">Other</a></li>
    </ul>

    <div class="tab-content">

        <div class="tab-pane fade show active" id="tab-general">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    @if (isNew)
                    {
                        <div class="alert alert-info mb-3">
                            <strong>Tip:</strong> You can paste JSON data from an exported phone using the button below.
                            <button type="button" class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#jsonPasteModal">üìã Paste JSON Data</button>
                        </div>
                    }
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label asp-for="BrandId" class="form-label">Brand</label>
                            <select asp-for="BrandId" asp-items="brandList" class="form-select"></select>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="SeriesId" class="form-label">Series</label>
                            <select asp-for="SeriesId" asp-items="seriesList" class="form-select">
                                <option value="">-- No Series --</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="ModelName" class="form-label">Model Name</label>
                            <input asp-for="ModelName" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="Slug" class="form-label">Slug</label>
                            <input asp-for="Slug" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            @await Html.PartialAsync("_ImageUpload", new TelefonOzellikleri.Models.ViewModels.ImageUploadViewModel
                            {
                                LabelText = "Main Image URL",
                                UrlInputId = "mainImageUrl",
                                FileInputId = "mainImageFile",
                                StatusId = "uploadStatus",
                                InputName = "MainImageUrl",
                                UploadFolder = "phones",
                                CurrentValue = Model?.MainImageUrl
                            })
                        </div>
                        <div class="col-md-3">
                            <label asp-for="Status" class="form-label">Status</label>
                            <select asp-for="Status" class="form-select">
                                <option value="">-- Select --</option>
                                @foreach (var val in Enum.GetValues<TelefonOzellikleri.Models.Enums.PhoneStatus>())
                                {
                                    <option value="@val.ToString()">@val</option>
                                }
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="ReleaseDate" class="form-label">Release Date</label>
                            <input asp-for="ReleaseDate" type="date" class="form-control" />
                        </div>
                        <div class="col-md-12">
                            <label asp-for="BoxContents" class="form-label">Box Contents</label>
                            <textarea asp-for="BoxContents" class="form-control" rows="2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-design">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label asp-for="Height" class="form-label">Height (mm)</label>
                            <input asp-for="Height" type="number" step="0.1" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="Width" class="form-label">Width (mm)</label>
                            <input asp-for="Width" type="number" step="0.1" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="Thickness" class="form-label">Thickness (mm)</label>
                            <input asp-for="Thickness" type="number" step="0.1" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="Weight" class="form-label">Weight (g)</label>
                            <input asp-for="Weight" type="number" step="0.1" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="FrameMaterial" class="form-label">Frame Material</label>
                            <input asp-for="FrameMaterial" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="BackMaterial" class="form-label">Back Material</label>
                            <input asp-for="BackMaterial" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ScreenProtection" class="form-label">Screen Protection</label>
                            <input asp-for="ScreenProtection" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="DustWaterRes" class="form-label">Dust/Water Resistance</label>
                            <input asp-for="DustWaterRes" class="form-control" placeholder="e.g. IP68" />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Colors</label>
                            <input type="text" name="ColorsRaw" class="form-control"
                                placeholder="Comma separated (e.g. Black, White, Blue)"
                                value="@(Model.Colors != null ? string.Join(", ", Model.Colors) : "")" />
                            <small class="text-muted">Enter colors separated by commas</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-display">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="ScreenSize" class="form-label">Screen Size (inch)</label>
                            <input asp-for="ScreenSize" type="number" step="0.01" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ScreenRes" class="form-label">Resolution</label>
                            <input asp-for="ScreenRes" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ScreenTech" class="form-label">Technology</label>
                            <input asp-for="ScreenTech" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="RefreshRate" class="form-label">Refresh Rate (Hz)</label>
                            <input asp-for="RefreshRate" type="number" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="PixelDensity" class="form-label">Pixel Density (ppi)</label>
                            <input asp-for="PixelDensity" type="number" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="ScreenBodyRatio" class="form-label">Screen-to-Body (%)</label>
                            <input asp-for="ScreenBodyRatio" type="number" step="0.1" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="ScreenBrightnessNits" class="form-label">Brightness (nits)</label>
                            <input asp-for="ScreenBrightnessNits" type="number" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="ScreenAspectRatio" class="form-label">Aspect Ratio</label>
                            <input asp-for="ScreenAspectRatio" class="form-control" placeholder="e.g. 19.5:9" />
                        </div>
                        <div class="col-md-12">
                            <label class="form-label">Extra Features</label>
                            <input type="text" name="ScreenExtraFeaturesRaw" class="form-control"
                                placeholder="Comma separated (e.g. HDR10+, Dolby Vision, Always-On)"
                                value="@(Model.ScreenExtraFeatures != null ? string.Join(", ", Model.ScreenExtraFeatures) : "")" />
                            <small class="text-muted">Enter features separated by commas</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-camera">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h6 class="fw-bold mb-3">Main Camera</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input type="checkbox" id="Cam1Exists" name="Cam1Exists" class="form-check-input" value="true" @(Model.Cam1Exists == true ? "checked" : "") />
                                <label for="Cam1Exists" class="form-check-label">Exists</label>
                            </div>
                        </div>
                        <div class="col-md-2"><label asp-for="Cam1Res" class="form-label">Resolution</label><input
                                asp-for="Cam1Res" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam1Aperture" class="form-label">Aperture</label><input
                                asp-for="Cam1Aperture" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam1Focal" class="form-label">Focal</label><input
                                asp-for="Cam1Focal" class="form-control" /></div>
                        <div class="col-md-4"><label asp-for="Cam1Features" class="form-label">Features</label><input
                                asp-for="Cam1Features" class="form-control" /></div>
                        <div class="col-md-2 offset-md-2"></div>
                        <div class="col-md-2"><label asp-for="Cam1SensorSize" class="form-label">Sensor
                                Size</label><input asp-for="Cam1SensorSize" class="form-control"
                                placeholder='e.g. 1/1.28"' /></div>
                        <div class="col-md-2"><label asp-for="Cam1PixelSize" class="form-label">Pixel Size</label><input
                                asp-for="Cam1PixelSize" class="form-control" placeholder="e.g. 1.22¬µm" /></div>
                    </div>

                    <h6 class="fw-bold mb-3">2nd Camera</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input type="checkbox" id="Cam2Exists" name="Cam2Exists" class="form-check-input" value="true" @(Model.Cam2Exists == true ? "checked" : "") />
                                <label for="Cam2Exists" class="form-check-label">Exists</label>
                            </div>
                        </div>
                        <div class="col-md-2"><label asp-for="Cam2Type" class="form-label">Type</label><input
                                asp-for="Cam2Type" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam2Res" class="form-label">Resolution</label><input
                                asp-for="Cam2Res" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam2Aperture" class="form-label">Aperture</label><input
                                asp-for="Cam2Aperture" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam2Focal" class="form-label">Focal</label><input
                                asp-for="Cam2Focal" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam2Features" class="form-label">Features</label><input
                                asp-for="Cam2Features" class="form-control" /></div>
                        <div class="col-md-2 offset-md-2"></div>
                        <div class="col-md-2"><label asp-for="Cam2SensorSize" class="form-label">Sensor
                                Size</label><input asp-for="Cam2SensorSize" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam2PixelSize" class="form-label">Pixel Size</label><input
                                asp-for="Cam2PixelSize" class="form-control" /></div>
                    </div>

                    <h6 class="fw-bold mb-3">3rd Camera</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input type="checkbox" id="Cam3Exists" name="Cam3Exists" class="form-check-input" value="true" @(Model.Cam3Exists == true ? "checked" : "") />
                                <label for="Cam3Exists" class="form-check-label">Exists</label>
                            </div>
                        </div>
                        <div class="col-md-2"><label asp-for="Cam3Type" class="form-label">Type</label><input
                                asp-for="Cam3Type" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam3Res" class="form-label">Resolution</label><input
                                asp-for="Cam3Res" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam3Aperture" class="form-label">Aperture</label><input
                                asp-for="Cam3Aperture" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam3Focal" class="form-label">Focal</label><input
                                asp-for="Cam3Focal" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam3Features" class="form-label">Features</label><input
                                asp-for="Cam3Features" class="form-control" /></div>
                        <div class="col-md-2 offset-md-2"></div>
                        <div class="col-md-2"><label asp-for="Cam3SensorSize" class="form-label">Sensor
                                Size</label><input asp-for="Cam3SensorSize" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam3PixelSize" class="form-label">Pixel Size</label><input
                                asp-for="Cam3PixelSize" class="form-control" /></div>
                    </div>

                    <h6 class="fw-bold mb-3">4th Camera</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input type="checkbox" id="Cam4Exists" name="Cam4Exists" class="form-check-input" value="true" @(Model.Cam4Exists == true ? "checked" : "") />
                                <label for="Cam4Exists" class="form-check-label">Exists</label>
                            </div>
                        </div>
                        <div class="col-md-2"><label asp-for="Cam4Type" class="form-label">Type</label><input
                                asp-for="Cam4Type" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam4Res" class="form-label">Resolution</label><input
                                asp-for="Cam4Res" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam4Aperture" class="form-label">Aperture</label><input
                                asp-for="Cam4Aperture" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam4Focal" class="form-label">Focal</label><input
                                asp-for="Cam4Focal" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam4Features" class="form-label">Features</label><input
                                asp-for="Cam4Features" class="form-control" /></div>
                        <div class="col-md-2 offset-md-2"></div>
                        <div class="col-md-2"><label asp-for="Cam4SensorSize" class="form-label">Sensor
                                Size</label><input asp-for="Cam4SensorSize" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam4PixelSize" class="form-label">Pixel Size</label><input
                                asp-for="Cam4PixelSize" class="form-control" /></div>
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <label asp-for="RearVideoRes" class="form-label">Rear Video Resolution</label>
                            <input asp-for="RearVideoRes" class="form-control" />
                        </div>
                    </div>

                    <hr />
                    <h6 class="fw-bold mb-3">Front Camera</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input type="checkbox" id="FrontExists" name="FrontExists" class="form-check-input" value="true" @(Model.FrontExists == true ? "checked" : "") />
                                <label for="FrontExists" class="form-check-label">Exists</label>
                            </div>
                        </div>
                        <div class="col-md-2"><label asp-for="FrontCamRes" class="form-label">Resolution</label><input
                                asp-for="FrontCamRes" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="FrontCamAperture"
                                class="form-label">Aperture</label><input asp-for="FrontCamAperture"
                                class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="FrontCamFocal" class="form-label">Focal</label><input
                                asp-for="FrontCamFocal" class="form-control" /></div>
                        <div class="col-md-4"><label asp-for="FrontCamFeatures"
                                class="form-label">Features</label><input asp-for="FrontCamFeatures"
                                class="form-control" /></div>
                        <div class="col-md-2 offset-md-2"></div>
                        <div class="col-md-2"><label asp-for="FrontCamSensorSize" class="form-label">Sensor
                                Size</label><input asp-for="FrontCamSensorSize" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="FrontCamPixelSize" class="form-label">Pixel
                                Size</label><input asp-for="FrontCamPixelSize" class="form-control" /></div>
                    </div>
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label asp-for="FrontVideoRes" class="form-label">Front Video Resolution</label>
                            <input asp-for="FrontVideoRes" class="form-control" />
                        </div>
                        <div class="col-md-1">
                            <div class="form-check mt-4">
                                <input type="checkbox" id="SecondFrontExists" name="SecondFrontExists" class="form-check-input" value="true" @(Model.SecondFrontExists == true ? "checked" : "") />
                                <label for="SecondFrontExists" class="form-check-label">2nd</label>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <label asp-for="SecondFrontRes" class="form-label">2nd Front Res</label>
                            <input asp-for="SecondFrontRes" class="form-control" />
                        </div>
                        <div class="col-md-2"><label asp-for="SecondFrontSensorSize" class="form-label">Sensor
                                Size</label><input asp-for="SecondFrontSensorSize" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="SecondFrontPixelSize" class="form-label">Pixel
                                Size</label><input asp-for="SecondFrontPixelSize" class="form-control" /></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-security">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <div class="form-check mt-2">
                                <input type="checkbox" id="HasFaceRecognition" name="HasFaceRecognition" class="form-check-input" value="true" @(Model.HasFaceRecognition == true ? "checked" : "") />
                                <label for="HasFaceRecognition" class="form-check-label">Face Recognition</label>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-check mt-2">
                                <input type="checkbox" id="HasFingerprint" name="HasFingerprint" class="form-check-input" value="true" @(Model.HasFingerprint == true ? "checked" : "") />
                                <label for="HasFingerprint" class="form-check-label">Fingerprint Reader</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="FingerprintType" class="form-label">Fingerprint Type</label>
                            <input asp-for="FingerprintType" class="form-control"
                                placeholder="e.g. Optical (Under-display), Ultrasonic, Side-mounted" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-hardware">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="Chipset" class="form-label">Chipset</label>
                            <input asp-for="Chipset" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="Cpu" class="form-label">CPU</label>
                            <input asp-for="Cpu" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="Gpu" class="form-label">GPU</label>
                            <input asp-for="Gpu" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">RAM Options</label>
                            <input type="text" name="RamOptionsRaw" class="form-control"
                                placeholder="Comma separated (e.g. 8GB, 12GB, 16GB)"
                                value="@(Model.RamOptions != null ? string.Join(", ", Model.RamOptions) : "")" />
                            <small class="text-muted">Enter options separated by commas</small>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Storage Options</label>
                            <input type="text" name="StorageOptionsRaw" class="form-control"
                                placeholder="Comma separated (e.g. 128GB, 256GB, 512GB)"
                                value="@(Model.StorageOptions != null ? string.Join(", ", Model.StorageOptions) : "")" />
                            <small class="text-muted">Enter options separated by commas</small>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="StorageType" class="form-label">Storage Type</label>
                            <input asp-for="StorageType" class="form-control" placeholder="e.g. NVMe, UFS 4.0" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="AntutuScore" class="form-label">AnTuTu Score</label>
                            <input asp-for="AntutuScore" type="number" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="GeekbenchScore" class="form-label">Geekbench Score</label>
                            <input asp-for="GeekbenchScore" class="form-control" />
                        </div>
                        <div class="col-md-12">
                            <label asp-for="SensorsList" class="form-label">Sensors</label>
                            <textarea asp-for="SensorsList" class="form-control" rows="2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-software">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="OsType" class="form-label">OS Type</label>
                            <select asp-for="OsType" class="form-select">
                                <option value="">-- Select --</option>
                                @foreach (var val in Enum.GetValues<TelefonOzellikleri.Models.Enums.OsType>())
                                {
                                    <option value="@val.ToString()">@val.ToString()</option>
                                }
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="OsVersion" class="form-label">OS Version</label>
                            <input asp-for="OsVersion" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="UpdateGuaranteeYears" class="form-label">Update Guarantee (Years)</label>
                            <input asp-for="UpdateGuaranteeYears" class="form-control" placeholder="e.g. 5 yƒ±l" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="UpdateGuaranteeVersion" class="form-label">Update Until Version</label>
                            <input asp-for="UpdateGuaranteeVersion" class="form-control" placeholder="e.g. iOS 30" />
                        </div>
                        <div class="col-md-3">
                            <div class="form-check mt-2">
                                <input type="checkbox" id="HasAiFeatures" name="HasAiFeatures" class="form-check-input" value="true" @(Model.HasAiFeatures == true ? "checked" : "") />
                                <label for="HasAiFeatures" class="form-check-label">AI Features</label>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <label asp-for="AiFeaturesList" class="form-label">AI Features List</label>
                            <textarea asp-for="AiFeaturesList" class="form-control" rows="2"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-battery">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="BatteryType" class="form-label">Battery Type</label>
                            <select asp-for="BatteryType" class="form-select">
                                <option value="">-- Select --</option>
                                @foreach (var val in Enum.GetValues<TelefonOzellikleri.Models.Enums.BatteryType>())
                                {
                                    var label = val switch
                                    {
                                        TelefonOzellikleri.Models.Enums.BatteryType.LiIon => "Li-Ion",
                                        TelefonOzellikleri.Models.Enums.BatteryType.LiPo => "Li-Po",
                                        _ => val.ToString()
                                    };
                                    <option value="@val.ToString()">@label</option>
                                }
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="BatteryCapacity" class="form-label">Capacity (mAh)</label>
                            <input asp-for="BatteryCapacity" type="number" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ChargingSpeed" class="form-label">Wired Charging (W)</label>
                            <input asp-for="ChargingSpeed" type="number" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <div class="form-check mt-4">
                                <input type="checkbox" id="WirelessCharging" name="WirelessCharging" class="form-check-input" value="true" @(Model.WirelessCharging == true ? "checked" : "") />
                                <label for="WirelessCharging" class="form-check-label">Wireless Charging</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="WirelessSpeed" class="form-label">Wireless Charging (W)</label>
                            <input asp-for="WirelessSpeed" type="number" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <div class="form-check mt-4">
                                <input type="checkbox" id="ReverseWireless" name="ReverseWireless" class="form-check-input" value="true" @(Model.ReverseWireless == true ? "checked" : "") />
                                <label for="ReverseWireless" class="form-check-label">Reverse Wireless</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ReverseSpeed" class="form-label">Reverse Speed (W)</label>
                            <input asp-for="ReverseSpeed" type="number" class="form-control" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-network">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-2">
                            <div class="form-check">
                                <input type="checkbox" id="Support4g" name="Support4g" class="form-check-input" value="true" @(Model.Support4g == true ? "checked" : "") />
                                <label for="Support4g" class="form-check-label">4G</label>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-check">
                                <input type="checkbox" id="Support45g" name="Support45g" class="form-check-input" value="true" @(Model.Support45g == true ? "checked" : "") />
                                <label for="Support45g" class="form-check-label">4.5G</label>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-check">
                                <input type="checkbox" id="Support5g" name="Support5g" class="form-check-input" value="true" @(Model.Support5g == true ? "checked" : "") />
                                <label for="Support5g" class="form-check-label">5G</label>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-check">
                                <input type="checkbox" id="EsimSupport" name="EsimSupport" class="form-check-input" value="true" @(Model.EsimSupport == true ? "checked" : "") />
                                <label for="EsimSupport" class="form-check-label">eSIM Support</label>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <label asp-for="PhysicalSimCount" class="form-label">Physical SIM Count</label>
                            <input asp-for="PhysicalSimCount" type="number" class="form-control" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-connectivity">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="WifiVersion" class="form-label">Wi-Fi</label>
                            <select asp-for="WifiVersion" class="form-select">
                                <option value="">-- Select --</option>
                                @foreach (var val in Enum.GetValues<TelefonOzellikleri.Models.Enums.WifiVersion>())
                                {
                                    var label = val switch
                                    {
                                        TelefonOzellikleri.Models.Enums.WifiVersion.WiFi4 => "Wi-Fi 4",
                                        TelefonOzellikleri.Models.Enums.WifiVersion.WiFi5 => "Wi-Fi 5",
                                        TelefonOzellikleri.Models.Enums.WifiVersion.WiFi6 => "Wi-Fi 6",
                                        TelefonOzellikleri.Models.Enums.WifiVersion.WiFi6E => "Wi-Fi 6E",
                                        TelefonOzellikleri.Models.Enums.WifiVersion.WiFi7 => "Wi-Fi 7",
                                        _ => val.ToString()
                                    };
                                    <option value="@val.ToString()">@label</option>
                                }
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="BluetoothVer" class="form-label">Bluetooth</label>
                            <input asp-for="BluetoothVer" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <div class="form-check mt-4">
                                <input type="checkbox" id="Nfc" name="Nfc" class="form-check-input" value="true" @(Model.Nfc == true ? "checked" : "") />
                                <label for="Nfc" class="form-check-label">NFC</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="UsbType" class="form-label">USB Type</label>
                            <input asp-for="UsbType" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="UsbVersion" class="form-label">USB Version</label>
                            <input asp-for="UsbVersion" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <div class="form-check mt-4">
                                <input type="checkbox" id="IrBlaster" name="IrBlaster" class="form-check-input" value="true" @(Model.IrBlaster == true ? "checked" : "") />
                                <label for="IrBlaster" class="form-check-label">IR Blaster</label>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-check">
                                <input type="checkbox" id="Gps" name="Gps" class="form-check-input" value="true" @(Model.Gps == true ? "checked" : "") />
                                <label for="Gps" class="form-check-label">GPS</label>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-check">
                                <input type="checkbox" id="HasUwb" name="HasUwb" class="form-check-input" value="true" @(Model.HasUwb == true ? "checked" : "") />
                                <label for="HasUwb" class="form-check-label">UWB</label>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-check">
                                <input type="checkbox" id="HasSatelliteSos" name="HasSatelliteSos" class="form-check-input" value="true" @(Model.HasSatelliteSos == true ? "checked" : "") />
                                <label for="HasSatelliteSos" class="form-check-label">Satellite SOS</label>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-check">
                                <input type="checkbox" id="HeadphoneJack35mm" name="HeadphoneJack35mm" class="form-check-input" value="true" @(Model.HeadphoneJack35mm == true ? "checked" : "") />
                                <label for="HeadphoneJack35mm" class="form-check-label">3.5mm Jack</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="SpeakerType" class="form-label">Speaker Type</label>
                            <select asp-for="SpeakerType" class="form-select">
                                <option value="">-- Select --</option>
                                @foreach (var val in Enum.GetValues<TelefonOzellikleri.Models.Enums.SpeakerType>())
                                {
                                    <option value="@val.ToString()">@val.ToString()</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OTHER TAB -->
        <div class="tab-pane fade" id="tab-other">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h6 class="fw-bold mb-3">SAR Values</h6>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label asp-for="SarHead" class="form-label">SAR Head (W/kg)</label>
                            <input asp-for="SarHead" type="number" step="0.01" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="SarBody" class="form-label">SAR Body (W/kg)</label>
                            <input asp-for="SarBody" type="number" step="0.01" class="form-control" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex justify-content-between mt-4 mb-4">
        <div class="d-flex gap-2">
            <a href="/derin/phones" class="btn btn-outline-secondary">‚Üê Back</a>
            @if (!isNew)
            {
                <a href="/derin/phones/export/@Model.Id" class="btn btn-outline-success btn-sm" title="Download phone data as JSON">üì• Export JSON</a>
            }
        </div>
        <button type="submit" class="btn btn-primary px-4">@(isNew ? "Create Phone" : "Save Changes")</button>
    </div>
</form>

<!-- JSON Paste Modal -->
<div class="modal fade" id="jsonPasteModal" tabindex="-1" aria-labelledby="jsonPasteModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="jsonPasteModalLabel">Paste JSON Data</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <textarea id="jsonInput" class="form-control" rows="10" placeholder="Paste JSON data here..."></textarea>
                <small class="text-muted mt-2 d-block">Paste valid JSON containing fields like "general", "display", "design", etc.</small>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="parseAndFillJson()">Fill Fields</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function setFieldValue(elementId, value) {
            var element = document.getElementById(elementId);
            if (element && value) {
                element.value = value;
            }
        }

        // Handle form submission - ensure unchecked checkboxes are sent as false
        document.getElementById('phoneForm').addEventListener('submit', function(e) {
            const checkboxFields = [
                'Cam1Exists', 'Cam2Exists', 'Cam3Exists', 'Cam4Exists',
                'FrontExists', 'SecondFrontExists',
                'Support4g', 'Support5g', 'Support45g',
                'Nfc', 'Gps', 'IrBlaster', 'HasUwb', 'HasSatelliteSos', 'EsimSupport',
                'HeadphoneJack35mm',
                'WirelessCharging', 'ReverseWireless',
                'HasAiFeatures', 'HasFaceRecognition', 'HasFingerprint'
            ];
            
            checkboxFields.forEach(function(fieldName) {
                const checkbox = document.getElementById(fieldName);
                if (checkbox && !checkbox.checked) {
                    // Create a hidden input for unchecked checkboxes
                    const hidden = document.createElement('input');
                    hidden.type = 'hidden';
                    hidden.name = fieldName;
                    hidden.value = 'false';
                    checkbox.parentNode.appendChild(hidden);
                }
            });
        });

        function parseAndFillJson() {
            try {
                var jsonText = document.getElementById('jsonInput').value;
                if (!jsonText.trim()) {
                    alert('Please paste JSON data.');
                    return;
                }

                var data = JSON.parse(jsonText);

                // General
                if (data.general) {
                    setFieldValue('ModelName', data.general.name);
                    setFieldValue('Slug', data.general.slug);
                    setFieldValue('MainImageUrl', data.general.mainImageUrl);
                    setFieldValue('ReleaseDate', data.general.releaseDate);
                    setFieldValue('Status', data.general.status);
                    setFieldValue('BrandId', data.general.brandId);
                    setFieldValue('SeriesId', data.general.seriesId);
                    setFieldValue('BoxContents', data.general.boxContents);
                    if (data.general.colors && Array.isArray(data.general.colors)) {
                        var colorsInput = document.querySelector('input[name="ColorsRaw"]');
                        if (colorsInput) {
                            colorsInput.value = data.general.colors.join(', ');
                        }
                    }
                }

                // Display
                if (data.display) {
                    setFieldValue('ScreenSize', data.display.size);
                    setFieldValue('ScreenTech', data.display.technology);
                    setFieldValue('ScreenRes', data.display.resolution);
                    setFieldValue('RefreshRate', data.display.refreshRate);
                    setFieldValue('PixelDensity', data.display.pixelDensity);
                    setFieldValue('ScreenBodyRatio', data.display.bodyRatio);
                    setFieldValue('ScreenAspectRatio', data.display.aspectRatio);
                    setFieldValue('ScreenBrightnessNits', data.display.brightness);
                    setFieldValue('ScreenProtection', data.display.protection);
                    if (data.display.extraFeatures && Array.isArray(data.display.extraFeatures)) {
                        var extraFeaturesInput = document.querySelector('input[name="ScreenExtraFeaturesRaw"]');
                        if (extraFeaturesInput) {
                            extraFeaturesInput.value = data.display.extraFeatures.join(', ');
                        }
                    }
                }

                // Design
                if (data.design) {
                    setFieldValue('Height', data.design.height);
                    setFieldValue('Width', data.design.width);
                    setFieldValue('Thickness', data.design.thickness);
                    setFieldValue('Weight', data.design.weight);
                    setFieldValue('FrameMaterial', data.design.frameMaterial);
                    setFieldValue('BackMaterial', data.design.backMaterial);
                    setFieldValue('DustWaterRes', data.design.dustWaterResistance);
                }

                // Camera
                if (data.camera && data.camera.rear && data.camera.rear.main) {
                    var mainCheckbox = document.getElementById('Cam1Exists');
                    if (mainCheckbox) mainCheckbox.checked = true;
                    
                    var main = data.camera.rear.main;
                    setFieldValue('Cam1Res', main.resolution);
                    setFieldValue('Cam1Aperture', main.aperture);
                    setFieldValue('Cam1Focal', main.focal);
                    setFieldValue('Cam1SensorSize', main.sensorSize);
                    setFieldValue('Cam1PixelSize', main.pixelSize);
                    setFieldValue('Cam1Features', main.features);
                }

                if (data.camera && data.camera.rear && data.camera.rear.secondary) {
                    var cam2Checkbox = document.getElementById('Cam2Exists');
                    if (cam2Checkbox) cam2Checkbox.checked = true;
                    
                    var secondary = data.camera.rear.secondary;
                    setFieldValue('Cam2Type', secondary.type);
                    setFieldValue('Cam2Res', secondary.resolution);
                    setFieldValue('Cam2Aperture', secondary.aperture);
                    setFieldValue('Cam2Focal', secondary.focal);
                    setFieldValue('Cam2SensorSize', secondary.sensorSize);
                    setFieldValue('Cam2PixelSize', secondary.pixelSize);
                    setFieldValue('Cam2Features', secondary.features);
                }

                if (data.camera && data.camera.rear && data.camera.rear.tertiary) {
                    var cam3Checkbox = document.getElementById('Cam3Exists');
                    if (cam3Checkbox) cam3Checkbox.checked = true;
                    
                    var tertiary = data.camera.rear.tertiary;
                    setFieldValue('Cam3Type', tertiary.type);
                    setFieldValue('Cam3Res', tertiary.resolution);
                    setFieldValue('Cam3Aperture', tertiary.aperture);
                    setFieldValue('Cam3Focal', tertiary.focal);
                    setFieldValue('Cam3SensorSize', tertiary.sensorSize);
                    setFieldValue('Cam3PixelSize', tertiary.pixelSize);
                    setFieldValue('Cam3Features', tertiary.features);
                }

                if (data.camera && data.camera.rear && data.camera.rear.quaternary) {
                    var cam4Checkbox = document.getElementById('Cam4Exists');
                    if (cam4Checkbox) cam4Checkbox.checked = true;
                    
                    var quaternary = data.camera.rear.quaternary;
                    setFieldValue('Cam4Type', quaternary.type);
                    setFieldValue('Cam4Res', quaternary.resolution);
                    setFieldValue('Cam4Aperture', quaternary.aperture);
                    setFieldValue('Cam4Focal', quaternary.focal);
                    setFieldValue('Cam4SensorSize', quaternary.sensorSize);
                    setFieldValue('Cam4PixelSize', quaternary.pixelSize);
                    setFieldValue('Cam4Features', quaternary.features);
                }

                if (data.camera && data.camera.rear) {
                    setFieldValue('RearVideoRes', data.camera.rear.videoResolution);
                }

                if (data.camera && data.camera.front) {
                    var frontCheckbox = document.getElementById('FrontExists');
                    if (frontCheckbox) frontCheckbox.checked = true;
                    
                    var front = data.camera.front;
                    setFieldValue('FrontCamRes', front.resolution);
                    setFieldValue('FrontCamAperture', front.aperture);
                    setFieldValue('FrontCamFocal', front.focal);
                    setFieldValue('FrontCamSensorSize', front.sensorSize);
                    setFieldValue('FrontCamPixelSize', front.pixelSize);
                    setFieldValue('FrontCamFeatures', front.features);
                    setFieldValue('FrontVideoRes', front.videoResolution);
                    if (front.secondFrontResolution) {
                        var secondFrontCheckbox = document.getElementById('SecondFrontExists');
                        if (secondFrontCheckbox) secondFrontCheckbox.checked = true;
                        setFieldValue('SecondFrontRes', front.secondFrontResolution);
                    }
                }

                // Battery
                if (data.battery) {
                    setFieldValue('BatteryType', data.battery.type);
                    setFieldValue('BatteryCapacity', data.battery.capacity);
                    setFieldValue('ChargingSpeed', data.battery.chargingSpeed);
                    if (data.battery.wirelessCharging) {
                        var wirelessCheckbox = document.getElementById('WirelessCharging');
                        if (wirelessCheckbox) wirelessCheckbox.checked = true;
                    }
                    setFieldValue('WirelessSpeed', data.battery.wirelessSpeed);
                    if (data.battery.reverseWireless) {
                        var reverseCheckbox = document.getElementById('ReverseWireless');
                        if (reverseCheckbox) reverseCheckbox.checked = true;
                    }
                    setFieldValue('ReverseSpeed', data.battery.reverseSpeed);
                }

                // Hardware
                if (data.hardware) {
                    setFieldValue('Chipset', data.hardware.chipset);
                    setFieldValue('Cpu', data.hardware.cpu);
                    setFieldValue('Gpu', data.hardware.gpu);
                    setFieldValue('AntutuScore', data.hardware.antutuScore);
                    setFieldValue('GeekbenchScore', data.hardware.geekbenchScore);
                    setFieldValue('StorageType', data.hardware.storageType);
                    if (data.hardware.ramOptions && Array.isArray(data.hardware.ramOptions)) {
                        var ramInput = document.querySelector('input[name="RamOptionsRaw"]');
                        if (ramInput) {
                            ramInput.value = data.hardware.ramOptions.join(', ');
                        }
                    }
                    if (data.hardware.storageOptions && Array.isArray(data.hardware.storageOptions)) {
                        var storageInput = document.querySelector('input[name="StorageOptionsRaw"]');
                        if (storageInput) {
                            storageInput.value = data.hardware.storageOptions.join(', ');
                        }
                    }
                    setFieldValue('SensorsList', data.hardware.sensors);
                }

                // Software
                if (data.software) {
                    setFieldValue('OsType', data.software.osType);
                    setFieldValue('OsVersion', data.software.osVersion);
                    setFieldValue('UpdateGuaranteeYears', data.software.updateGuaranteeYears);
                    setFieldValue('UpdateGuaranteeVersion', data.software.updateGuaranteeVersion);
                    if (data.software.hasAiFeatures) {
                        var aiCheckbox = document.getElementById('HasAiFeatures');
                        if (aiCheckbox) aiCheckbox.checked = true;
                    }
                    setFieldValue('AiFeaturesList', data.software.aiFeaturesList);
                }

                // Connectivity
                if (data.connectivity) {
                    setFieldValue('WifiVersion', data.connectivity.wifiVersion);
                    setFieldValue('BluetoothVer', data.connectivity.bluetoothVersion);
                    setFieldValue('UsbType', data.connectivity.usbType);
                    setFieldValue('UsbVersion', data.connectivity.usbVersion);
                    setFieldValue('PhysicalSimCount', data.connectivity.physicalSimCount);
                    setFieldValue('SpeakerType', data.connectivity.speakerType);
                    
                    // Connectivity checkboxes
                    if (data.connectivity.nfc) {
                        var nfcCheckbox = document.getElementById('Nfc');
                        if (nfcCheckbox) nfcCheckbox.checked = true;
                    }
                    if (data.connectivity['5g']) {
                        var support5gCheckbox = document.getElementById('Support5g');
                        if (support5gCheckbox) support5gCheckbox.checked = true;
                    }
                    if (data.connectivity['4g']) {
                        var support4gCheckbox = document.getElementById('Support4g');
                        if (support4gCheckbox) support4gCheckbox.checked = true;
                    }
                    if (data.connectivity['4_5g']) {
                        var support45gCheckbox = document.getElementById('Support45g');
                        if (support45gCheckbox) support45gCheckbox.checked = true;
                    }
                    if (data.connectivity.gps) {
                        var gpsCheckbox = document.getElementById('Gps');
                        if (gpsCheckbox) gpsCheckbox.checked = true;
                    }
                    if (data.connectivity.irBlaster) {
                        var irBlasterCheckbox = document.getElementById('IrBlaster');
                        if (irBlasterCheckbox) irBlasterCheckbox.checked = true;
                    }
                    if (data.connectivity.uwb) {
                        var uwbCheckbox = document.getElementById('HasUwb');
                        if (uwbCheckbox) uwbCheckbox.checked = true;
                    }
                    if (data.connectivity.satelliteSos) {
                        var satSosCheckbox = document.getElementById('HasSatelliteSos');
                        if (satSosCheckbox) satSosCheckbox.checked = true;
                    }
                    if (data.connectivity.esim) {
                        var esimCheckbox = document.getElementById('EsimSupport');
                        if (esimCheckbox) esimCheckbox.checked = true;
                    }
                }

                // Security
                if (data.security) {
                    if (data.security.faceRecognition) {
                        var faceCheckbox = document.getElementById('HasFaceRecognition');
                        if (faceCheckbox) faceCheckbox.checked = true;
                    }
                    if (data.security.fingerprint) {
                        var fingerprintCheckbox = document.getElementById('HasFingerprint');
                        if (fingerprintCheckbox) fingerprintCheckbox.checked = true;
                    }
                    setFieldValue('FingerprintType', data.security.fingerprintType);
                }

                // Other (SAR Values)
                if (data.other) {
                    setFieldValue('SarHead', data.other.sarHead);
                    setFieldValue('SarBody', data.other.sarBody);
                }

                alert('JSON data filled successfully! Please complete any remaining fields manually.');
                var modal = bootstrap.Modal.getInstance(document.getElementById('jsonPasteModal'));
                modal.hide();
            } catch (error) {
                alert('JSON parsing error: ' + error.message);
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Auto-check camera "Exists" checkboxes when any related field has value
            function setupCameraAutoCheck() {
                // Main Camera (Cam1)
                const cam1Fields = ['Cam1Res', 'Cam1Aperture', 'Cam1Focal', 'Cam1SensorSize', 'Cam1PixelSize', 'Cam1Features'];
                cam1Fields.forEach(function(fieldId) {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        field.addEventListener('input', function() {
                            const cam1Checkbox = document.getElementById('Cam1Exists');
                            if (cam1Checkbox && this.value.trim()) {
                                cam1Checkbox.checked = true;
                            }
                        });
                    }
                });

                // 2nd Camera (Cam2)
                const cam2Fields = ['Cam2Type', 'Cam2Res', 'Cam2Aperture', 'Cam2Focal', 'Cam2SensorSize', 'Cam2PixelSize', 'Cam2Features'];
                cam2Fields.forEach(function(fieldId) {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        field.addEventListener('input', function() {
                            const cam2Checkbox = document.getElementById('Cam2Exists');
                            if (cam2Checkbox && this.value.trim()) {
                                cam2Checkbox.checked = true;
                            }
                        });
                    }
                });

                // 3rd Camera (Cam3)
                const cam3Fields = ['Cam3Type', 'Cam3Res', 'Cam3Aperture', 'Cam3Focal', 'Cam3SensorSize', 'Cam3PixelSize', 'Cam3Features'];
                cam3Fields.forEach(function(fieldId) {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        field.addEventListener('input', function() {
                            const cam3Checkbox = document.getElementById('Cam3Exists');
                            if (cam3Checkbox && this.value.trim()) {
                                cam3Checkbox.checked = true;
                            }
                        });
                    }
                });

                // 4th Camera (Cam4)
                const cam4Fields = ['Cam4Type', 'Cam4Res', 'Cam4Aperture', 'Cam4Focal', 'Cam4SensorSize', 'Cam4PixelSize', 'Cam4Features'];
                cam4Fields.forEach(function(fieldId) {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        field.addEventListener('input', function() {
                            const cam4Checkbox = document.getElementById('Cam4Exists');
                            if (cam4Checkbox && this.value.trim()) {
                                cam4Checkbox.checked = true;
                            }
                        });
                    }
                });

                // Front Camera
                const frontFields = ['FrontCamRes', 'FrontCamAperture', 'FrontCamFocal', 'FrontCamSensorSize', 'FrontCamPixelSize', 'FrontCamFeatures', 'FrontVideoRes'];
                frontFields.forEach(function(fieldId) {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        field.addEventListener('input', function() {
                            const frontCheckbox = document.getElementById('FrontExists');
                            if (frontCheckbox && this.value.trim()) {
                                frontCheckbox.checked = true;
                            }
                        });
                    }
                });

                // Second Front Camera
                const secondFrontFields = ['SecondFrontRes', 'SecondFrontSensorSize', 'SecondFrontPixelSize'];
                secondFrontFields.forEach(function(fieldId) {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        field.addEventListener('input', function() {
                            const secondFrontCheckbox = document.getElementById('SecondFrontExists');
                            if (secondFrontCheckbox && this.value.trim()) {
                                secondFrontCheckbox.checked = true;
                            }
                        });
                    }
                });
            }

            // Initialize camera auto-check
            setupCameraAutoCheck();
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        $(document).ready(function() {
            // Initialize Select2 for all select elements
            $('select').select2({
                theme: 'bootstrap-5',
                width: '100%',
                allowClear: true
            });
        });
    </script>
}

<style>
    .nav-tabs .nav-link {
        color: #555;
        font-weight: 500;
        font-size: 0.85rem;
    }

    .nav-tabs .nav-link.active {
        color: #1a1a2e;
        font-weight: 600;
        border-color: #dee2e6 #dee2e6 #fff;
    }

    .form-label {
        font-weight: 500;
        font-size: 0.85rem;
        color: #555;
    }

    .card {
        border-radius: 12px;
    }
</style>
