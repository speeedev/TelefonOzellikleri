@model TelefonOzellikleri.Models.ViewModels.SmartphoneDetailViewModel
@using TelefonOzellikleri.Helpers
@using System.Net

@functions {
    IHtmlContent RenderAsList(string? value) {
        if (string.IsNullOrWhiteSpace(value)) return Html.Raw("");
        var parts = value.Split(',', StringSplitOptions.TrimEntries | StringSplitOptions.RemoveEmptyEntries);
        if (parts.Length <= 1) return Html.Raw(WebUtility.HtmlEncode(value));
        var sb = new System.Text.StringBuilder();
        sb.Append("<ul class=\"list-unstyled mb-0\">");
        foreach (var p in parts) {
            sb.Append("<li>").Append(WebUtility.HtmlEncode(p)).Append("</li>");
        }
        sb.Append("</ul>");
        return Html.Raw(sb.ToString());
    }
    IHtmlContent RenderListAsBullets(List<string>? items) {
        if (items == null || items.Count == 0) return Html.Raw("");
        var sb = new System.Text.StringBuilder();
        sb.Append("<ul class=\"list-unstyled mb-0\">");
        foreach (var item in items) {
            sb.Append("<li>").Append(WebUtility.HtmlEncode(item)).Append("</li>");
        }
        sb.Append("</ul>");
        return Html.Raw(sb.ToString());
    }
}

@{
    var phone = Model.Phone;
    var brand = Model.Brand;
    var series = Model.Series;
    var baseUrl = $"{Context.Request.Scheme}://{Context.Request.Host}";
    var productImage = !string.IsNullOrEmpty(phone.MainImageUrl)
        ? (phone.MainImageUrl.StartsWith("http", StringComparison.OrdinalIgnoreCase) ? phone.MainImageUrl : baseUrl + (phone.MainImageUrl.StartsWith("/") ? "" : "/") + phone.MainImageUrl)
        : null;
    var productUrl = $"{baseUrl}/{phone.Slug}";
    var productName = $"{brand.Name} {phone.ModelName}";
}

@section StructuredData {
<script type="application/ld+json">
{
    "@@context": "https://schema.org",
    "@@type": "Product",
    "name": @Html.Raw(SchemaHelper.EscapeJsonString(productName)),
    "description": @Html.Raw(SchemaHelper.EscapeJsonString($"{productName} teknik özellikleri, kamera, ekran, batarya ve donanım detayları")),
    "url": @Html.Raw(SchemaHelper.EscapeJsonString(productUrl)),
    @if (!string.IsNullOrEmpty(productImage))
    {
        <text>"image": @Html.Raw(SchemaHelper.EscapeJsonString(productImage)),</text>
    }
    "brand": {
        "@@type": "Brand",
        "name": @Html.Raw(SchemaHelper.EscapeJsonString(brand.Name))
    }
}
</script>
<script type="application/ld+json">
{
    "@@context": "https://schema.org",
    "@@type": "BreadcrumbList",
    "itemListElement": [
        { "@@type": "ListItem", "position": 1, "name": "Ana Sayfa", "item": @Html.Raw(SchemaHelper.EscapeJsonString(baseUrl)) },
        { "@@type": "ListItem", "position": 2, "name": @Html.Raw(SchemaHelper.EscapeJsonString(productName)), "item": @Html.Raw(SchemaHelper.EscapeJsonString(productUrl)) }
    ]
}
</script>
}

<article class="container my-4">
    <!-- Telefon Başlık ve Görsel -->
    <div class="row mb-4">
        <div class="col-md-4 text-center mb-3 mb-md-0">
            @if (!string.IsNullOrEmpty(phone.MainImageUrl))
            {
                <img src="@phone.MainImageUrl" alt="@brand.Name @phone.ModelName" class="phone-main-image img-fluid" width="400" height="500" />
            }
            else
            {
                <div class="phone-placeholder d-flex align-items-center justify-content-center">
                    <span class="text-muted">Görsel Yok</span>
                </div>
            }
        </div>
        <div class="col-md-8">
            <div class="phone-header-card">
                @if (!string.IsNullOrEmpty(brand.LogoUrl))
                {
                    <img src="@brand.LogoUrl" alt="@brand.Name" class="brand-logo mb-2" width="120" height="36" />
                }
                <h1 class="phone-title">@brand.Name @phone.ModelName</h1>
                @if (series != null)
                {
                    <span class="badge bg-secondary mb-2">@series.SeriesName Serisi</span>
                }
                @if (phone.Status.HasValue)
                {
                    <p class="mb-1"><strong>Durum:</strong> @phone.Status.ToString()</p>
                }
                @if (phone.ReleaseDate.HasValue)
                {
                    <p class="text-muted mt-1">
                        Çıkış Tarihi: @phone.ReleaseDate.Value.ToString("MMMM yyyy")
                    </p>
                }
                @if (phone.OsType.HasValue)
                {
                    <p class="mb-1"><strong>İşletim Sistemi:</strong> @phone.OsType.ToString() @phone.OsVersion</p>
                }
                else if (!string.IsNullOrEmpty(phone.OsVersion))
                {
                    <p class="mb-1"><strong>İşletim Sistemi:</strong> @phone.OsVersion</p>
                }
                @if (!string.IsNullOrEmpty(phone.UpdateGuaranteeYears) || !string.IsNullOrEmpty(phone.UpdateGuaranteeVersion))
                {
                    <p class="mb-1">
                        <strong>Güncelleme Garantisi:</strong> 
                        @if (!string.IsNullOrEmpty(phone.UpdateGuaranteeYears) && !string.IsNullOrEmpty(phone.UpdateGuaranteeVersion))
                        {
                            <text>@phone.UpdateGuaranteeYears (@phone.UpdateGuaranteeVersion sürümüne kadar)</text>
                        }
                        else if (!string.IsNullOrEmpty(phone.UpdateGuaranteeYears))
                        {
                            <text>@phone.UpdateGuaranteeYears</text>
                        }
                        else
                        {
                            <text>@phone.UpdateGuaranteeVersion sürümüne kadar</text>
                        }
                    </p>
                }

                <!-- Renkler -->
                @if (phone.Colors != null && phone.Colors.Count > 0)
                {
                    <div class="mt-2">
                        <strong>Renkler:</strong>
                        @foreach (var color in phone.Colors)
                        {
                            <span class="badge bg-light text-dark border me-1">@color</span>
                        }
                    </div>
                }

                <!-- Hızlı Özellikler -->
                <div class="quick-specs mt-3">
                    @if (phone.ScreenSize.HasValue)
                    {
                        <span class="quick-spec-badge">@phone.ScreenSize" Ekran</span>
                    }
                    @if (phone.BatteryCapacity.HasValue)
                    {
                        <span class="quick-spec-badge">@phone.BatteryCapacity mAh</span>
                    }
                    @if (phone.Cam1Exists ?? false && !string.IsNullOrEmpty(phone.Cam1Res))
                    {
                        <span class="quick-spec-badge">@phone.Cam1Res Kamera</span>
                    }
                    @if (!string.IsNullOrEmpty(phone.Chipset))
                    {
                        <span class="quick-spec-badge">@phone.Chipset</span>
                    }
                    @if (phone.Support5g == true)
                    {
                        <span class="quick-spec-badge">5G</span>
                    }
                    @if (phone.Nfc == true)
                    {
                        <span class="quick-spec-badge">NFC</span>
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- Özellik Tabloları -->
    <div class="row">
        <div class="col-lg-12">

            <!-- TASARIM & BOYUT -->
            <div class="spec-section">
                <h3 class="spec-section-title">Tasarım & Boyut</h3>
                <table class="table spec-table">
                    <tbody>
                        @if (phone.Height.HasValue || phone.Width.HasValue || phone.Thickness.HasValue)
                        {
                            <tr>
                                <th>Boyutlar</th>
                                <td>
                                    @if (phone.Height.HasValue) { <text>@phone.Height mm (Y)</text> }
                                    @if (phone.Width.HasValue) { <text> x @phone.Width mm (G)</text> }
                                    @if (phone.Thickness.HasValue) { <text> x @phone.Thickness mm (K)</text> }
                                </td>
                            </tr>
                        }
                        @if (phone.Weight.HasValue)
                        {
                            var w = phone.Weight.Value;
                            var weightText = w == Math.Floor(w) ? w.ToString("0") : w.ToString("0.00");
                            <tr><th>Ağırlık</th><td>@weightText g</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.FrameMaterial))
                        {
                            <tr><th>Çerçeve Malzemesi</th><td>@phone.FrameMaterial</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.BackMaterial))
                        {
                            <tr><th>Arka Kapak Malzemesi</th><td>@phone.BackMaterial</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.DustWaterRes))
                        {
                            <tr><th>Su/Toz Dayanıklılığı</th><td>@phone.DustWaterRes</td></tr>
                        }
                    </tbody>
                </table>
            </div>

            <!-- EKRAN -->
            <div class="spec-section">
                <h3 class="spec-section-title">Ekran</h3>
                <table class="table spec-table">
                    <tbody>
                        @if (phone.ScreenSize.HasValue)
                        {
                            <tr><th>Ekran Boyutu</th><td>@phone.ScreenSize inç</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.ScreenTech))
                        {
                            <tr><th>Ekran Teknolojisi</th><td>@phone.ScreenTech</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.ScreenRes))
                        {
                            <tr><th>Çözünürlük</th><td>@phone.ScreenRes</td></tr>
                        }
                        @if (phone.RefreshRate.HasValue)
                        {
                            <tr><th>Yenileme Hızı</th><td>@phone.RefreshRate Hz</td></tr>
                        }
                        @if (phone.PixelDensity.HasValue)
                        {
                            <tr><th>Piksel Yoğunluğu</th><td>@phone.PixelDensity ppi</td></tr>
                        }
                        @if (phone.ScreenBodyRatio.HasValue)
                        {
                            <tr><th>Ekran/Gövde Oranı</th><td>%@phone.ScreenBodyRatio</td></tr>
                        }
                        @if (phone.ScreenBrightnessNits.HasValue)
                        {
                            <tr><th>Parlaklık</th><td>@phone.ScreenBrightnessNits nits</td></tr>
                        }
                        @if (phone.AlwaysOnDisplay.HasValue)
                        {
                            <tr><th>AOD (Her Zaman Açık Ekran)</th><td>@(phone.AlwaysOnDisplay == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.ScreenProtection))
                        {
                            <tr><th>Ekran Koruması</th><td>@phone.ScreenProtection</td></tr>
                        }
                        @if (phone.ScreenExtraFeatures != null && phone.ScreenExtraFeatures.Count > 0)
                        {
                            <tr>
                                <th>Ekstra Özellikler</th>
                                <td>
                                    <ul class="mb-0 ps-3">
                                        @foreach (var feature in phone.ScreenExtraFeatures)
                                        {
                                            <li>@feature</li>
                                        }
                                    </ul>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            <!-- ARKA KAMERA -->
            @if (phone.Cam1Exists == true)
            {
                <div class="spec-section">
                    <h3 class="spec-section-title">Arka Kamera</h3>
                    <table class="table spec-table">
                        <tbody>
                            <!-- Kamera 1 (Ana) -->
                            @if (!string.IsNullOrEmpty(phone.Cam1Res))
                            {
                                <tr><th>Ana Kamera</th><td>@phone.Cam1Res</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.Cam1Aperture))
                            {
                                <tr><th>Ana Kamera Diyafram</th><td>@phone.Cam1Aperture</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.Cam1Focal))
                            {
                                <tr><th>Ana Kamera Odak</th><td>@phone.Cam1Focal</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.Cam1SensorSize))
                            {
                                <tr><th>Ana Kamera Sensör Boyutu</th><td>@phone.Cam1SensorSize</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.Cam1PixelSize))
                            {
                                <tr><th>Ana Kamera Piksel Boyutu</th><td>@phone.Cam1PixelSize</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.Cam1Features))
                            {
                                <tr><th>Ana Kamera Özellikler</th><td>@RenderAsList(phone.Cam1Features)</td></tr>
                            }

                            <!-- Kamera 2 -->
                            @if (phone.Cam2Exists == true)
                            {
                                @if (!string.IsNullOrEmpty(phone.Cam2Type))
                                {
                                    <tr><th>2. Kamera Türü</th><td>@phone.Cam2Type</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam2Res))
                                {
                                    <tr><th>2. Kamera</th><td>@phone.Cam2Res</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam2Aperture))
                                {
                                    <tr><th>2. Kamera Diyafram</th><td>@phone.Cam2Aperture</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam2Focal))
                                {
                                    <tr><th>2. Kamera Odak</th><td>@phone.Cam2Focal</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam2Features))
                                {
                                    <tr><th>2. Kamera Özellikler</th><td>@RenderAsList(phone.Cam2Features)</td></tr>
                                }
                            }

                            <!-- Kamera 3 -->
                            @if (phone.Cam3Exists == true)
                            {
                                @if (!string.IsNullOrEmpty(phone.Cam3Type))
                                {
                                    <tr><th>3. Kamera Türü</th><td>@phone.Cam3Type</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam3Res))
                                {
                                    <tr><th>3. Kamera</th><td>@phone.Cam3Res</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam3Aperture))
                                {
                                    <tr><th>3. Kamera Diyafram</th><td>@phone.Cam3Aperture</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam3Focal))
                                {
                                    <tr><th>3. Kamera Odak</th><td>@phone.Cam3Focal</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam3Features))
                                {
                                    <tr><th>3. Kamera Özellikler</th><td>@RenderAsList(phone.Cam3Features)</td></tr>
                                }
                            }

                            <!-- Kamera 4 -->
                            @if (phone.Cam4Exists == true)
                            {
                                @if (!string.IsNullOrEmpty(phone.Cam4Type))
                                {
                                    <tr><th>4. Kamera Türü</th><td>@phone.Cam4Type</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam4Res))
                                {
                                    <tr><th>4. Kamera</th><td>@phone.Cam4Res</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam4Aperture))
                                {
                                    <tr><th>4. Kamera Diyafram</th><td>@phone.Cam4Aperture</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam4Focal))
                                {
                                    <tr><th>4. Kamera Odak</th><td>@phone.Cam4Focal</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.Cam4Features))
                                {
                                    <tr><th>4. Kamera Özellikler</th><td>@RenderAsList(phone.Cam4Features)</td></tr>
                                }
                            }

                            @if (!string.IsNullOrEmpty(phone.RearVideoRes))
                            {
                                <tr><th>Video Kaydı</th><td>@RenderAsList(phone.RearVideoRes)</td></tr>
                            }
                        </tbody>
                    </table>
                </div>
            }

            <!-- ÖN KAMERA -->
            @if (phone.FrontExists == true)
            {
                <div class="spec-section">
                    <h3 class="spec-section-title">Ön Kamera</h3>
                    <table class="table spec-table">
                        <tbody>
                            @if (!string.IsNullOrEmpty(phone.FrontCamRes))
                            {
                                <tr><th>Ön Kamera</th><td>@phone.FrontCamRes</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.FrontCamAperture))
                            {
                                <tr><th>Diyafram</th><td>@phone.FrontCamAperture</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.FrontCamFocal))
                            {
                                <tr><th>Odak Uzaklığı</th><td>@phone.FrontCamFocal</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.FrontCamSensorSize))
                            {
                                <tr><th>Sensör Boyutu</th><td>@phone.FrontCamSensorSize</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.FrontCamPixelSize))
                            {
                                <tr><th>Piksel Boyutu</th><td>@phone.FrontCamPixelSize</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.FrontCamFeatures))
                            {
                                <tr><th>Özellikler</th><td>@RenderAsList(phone.FrontCamFeatures)</td></tr>
                            }
                            @if (!string.IsNullOrEmpty(phone.FrontVideoRes))
                            {
                                <tr><th>Video Kaydı</th><td>@RenderAsList(phone.FrontVideoRes)</td></tr>
                            }
                            @if (phone.SecondFrontExists == true)
                            {
                                @if (!string.IsNullOrEmpty(phone.SecondFrontRes))
                                {
                                    <tr><th>2. Ön Kamera</th><td>@phone.SecondFrontRes</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.SecondFrontSensorSize))
                                {
                                    <tr><th>2. Ön Kamera Sensör Boyutu</th><td>@phone.SecondFrontSensorSize</td></tr>
                                }
                                @if (!string.IsNullOrEmpty(phone.SecondFrontPixelSize))
                                {
                                    <tr><th>2. Ön Kamera Piksel Boyutu</th><td>@phone.SecondFrontPixelSize</td></tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
            }

            <!-- İŞLEMCİ & PERFORMANS -->
            <div class="spec-section">
                <h3 class="spec-section-title">Donanım</h3>
                <table class="table spec-table">
                    <tbody>
                        @if (!string.IsNullOrEmpty(phone.Chipset))
                        {
                            <tr><th>Yonga Seti</th><td>@phone.Chipset</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.Cpu))
                        {
                            <tr><th>İşlemci (CPU)</th><td>@phone.Cpu</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.Gpu))
                        {
                            <tr><th>Grafik (GPU)</th><td>@phone.Gpu</td></tr>
                        }
                        @if (phone.AntutuScore.HasValue)
                        {
                            <tr><th>AnTuTu Skoru</th><td>@phone.AntutuScore.Value.ToString("N0")</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.GeekbenchScore))
                        {
                            <tr><th>Geekbench Skoru</th><td>@phone.GeekbenchScore</td></tr>
                        }
                        @if (phone.RamOptions != null && phone.RamOptions.Count > 0)
                        {
                            <tr>
                                <th>RAM Seçenekleri</th>
                                <td>@RenderListAsBullets(phone.RamOptions)</td>
                            </tr>
                        }
                        @if (phone.StorageOptions != null && phone.StorageOptions.Count > 0)
                        {
                            <tr>
                                <th>Depolama Seçenekleri</th>
                                <td>@RenderListAsBullets(phone.StorageOptions)</td>
                            </tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.StorageType))
                        {
                            <tr><th>Depolama Türü</th><td>@phone.StorageType</td></tr>
                        }
                    </tbody>
                </table>
            </div>

            <!-- BATARYA & ŞARJ -->
            <div class="spec-section">
                <h3 class="spec-section-title">Batarya & Şarj</h3>
                <table class="table spec-table">
                    <tbody>
                        @if (phone.BatteryCapacity.HasValue)
                        {
                            <tr><th>Batarya Kapasitesi</th><td>@phone.BatteryCapacity mAh</td></tr>
                        }
                        @if (phone.BatteryType.HasValue)
                        {
                            <tr><th>Batarya Türü</th><td>@phone.BatteryType.ToString()</td></tr>
                        }
                        @if (phone.ChargingSpeed.HasValue)
                        {
                            <tr><th>Kablolu Şarj Hızı</th><td>@phone.ChargingSpeed W</td></tr>
                        }
                        @if (phone.WirelessCharging.HasValue)
                        {
                            <tr><th>Kablosuz Şarj</th><td>@(phone.WirelessCharging == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (phone.WirelessCharging == true && phone.WirelessSpeed.HasValue)
                        {
                            <tr><th>Kablosuz Şarj Hızı</th><td>@phone.WirelessSpeed W</td></tr>
                        }
                        @if (   phone.ReverseWireless.HasValue)
                        {
                            <tr><th>Ters Kablosuz Şarj</th><td>@(phone.ReverseWireless == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (phone.ReverseWireless == true && phone.ReverseSpeed.HasValue)
                        {
                            <tr><th>Ters Şarj Hızı</th><td>@phone.ReverseSpeed W</td></tr>
                        }
                    </tbody>
                </table>
            </div>

            <!-- YAPAY ZEKA -->
            @if (phone.HasAiFeatures == true)
            {
                <div class="spec-section">
                    <h3 class="spec-section-title">Yapay Zeka Özellikleri</h3>
                    <table class="table spec-table">
                        <tbody>
                            @if (!string.IsNullOrEmpty(phone.AiFeaturesList))
                            {
                                <tr><th>AI Özellikleri</th><td>@RenderAsList(phone.AiFeaturesList)</td></tr>
                            }
                        </tbody>
                    </table>
                </div>
            }

            <!-- SES -->
            <div class="spec-section">
                <h3 class="spec-section-title">Ses</h3>
                <table class="table spec-table">
                    <tbody>
                        @if (phone.SpeakerType.HasValue)
                        {
                            <tr><th>Hoparlör</th><td>@phone.SpeakerType.ToString()</td></tr>
                        }
                        @if (phone.HeadphoneJack35mm.HasValue)
                        {
                            <tr><th>3.5mm Kulaklık Girişi</th><td>@(phone.HeadphoneJack35mm == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                    </tbody>
                </table>
            </div>

            <!-- BAĞLANTI -->
            <div class="spec-section">
                <h3 class="spec-section-title">Bağlantı</h3>
                <table class="table spec-table">
                    <tbody>
                        @if (phone.Support5g.HasValue)
                        {
                            <tr><th>5G Desteği</th><td>@(phone.Support5g == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (phone.Support4g.HasValue)
                        {
                            <tr><th>4G Desteği</th><td>@(phone.Support4g == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (phone.Support45g.HasValue)
                        {
                            <tr><th>4.5G Desteği</th><td>@(phone.Support45g == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (phone.Nfc.HasValue)
                        {
                            <tr><th>NFC</th><td>@(phone.Nfc == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.BluetoothVer))
                        {
                            <tr><th>Bluetooth</th><td>@phone.BluetoothVer</td></tr>
                        }
                        @if (phone.WifiVersion.HasValue)
                        {
                            <tr><th>WiFi</th><td>@phone.WifiVersion.ToString()</td></tr>
                        }
                        @if (phone.Gps.HasValue)
                        {
                            <tr><th>GPS</th><td>@(phone.Gps == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (phone.IrBlaster.HasValue)
                        {
                            <tr><th>Kızılötesi (IR Blaster)</th><td>@(phone.IrBlaster == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (phone.HasUwb.HasValue)
                        {
                            <tr><th>UWB (Ultra Wide Band)</th><td>@(phone.HasUwb == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (phone.HasSatelliteSos.HasValue)
                        {
                            <tr><th>Uydu SOS</th><td>@(phone.HasSatelliteSos == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.UsbType))
                        {
                            <tr><th>USB Türü</th><td>@phone.UsbType</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.UsbVersion))
                        {
                            <tr><th>USB Versiyonu</th><td>@phone.UsbVersion</td></tr>
                        }
                    </tbody>
                </table>
            </div>

            <!-- SIM & SENSÖRLER -->
            <div class="spec-section">
                <h3 class="spec-section-title">SIM & Sensörler</h3>
                <table class="table spec-table">
                    <tbody>
                        @if (phone.PhysicalSimCount.HasValue)
                        {
                            <tr><th>Fiziksel SIM</th><td>@(phone.PhysicalSimCount == 0 ? "Yok" : $"{phone.PhysicalSimCount} adet")</td></tr>
                        }
                        @if (phone.EsimSupport.HasValue)
                        {
                            <tr><th>eSIM Desteği</th><td>@(phone.EsimSupport == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                        }
                        @if (!string.IsNullOrEmpty(phone.SensorsList))
                        {
                            <tr><th>Sensörler</th><td>@RenderAsList(phone.SensorsList)</td></tr>
                        }
                    </tbody>
                </table>
            </div>

            <!-- GÜVENLİK -->
            @if (phone.HasFaceRecognition.HasValue || phone.HasFingerprint.HasValue)
            {
                <div class="spec-section">
                    <h3 class="spec-section-title">Güvenlik</h3>
                    <table class="table spec-table">
                        <tbody>
                            @if (phone.HasFaceRecognition.HasValue)
                            {
                                <tr><th>Yüz Tanıma</th><td>@(phone.HasFaceRecognition == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                            }
                            @if (phone.HasFingerprint.HasValue)
                            {
                                <tr><th>Parmak İzi</th><td>@(phone.HasFingerprint == true ? Html.Raw("✅ <span class=\"visually-hidden\">Var</span>") : Html.Raw("❌ <span class=\"visually-hidden\">Yok</span>"))</td></tr>
                            }
                            @if (phone.HasFingerprint == true && !string.IsNullOrEmpty(phone.FingerprintType))
                            {
                                <tr><th>Parmak İzi Türü</th><td>@phone.FingerprintType</td></tr>
                            }
                        </tbody>
                    </table>
                </div>
            }

            <!-- SAR DEĞERLERİ -->
            @if (phone.SarHead.HasValue || phone.SarBody.HasValue)
            {
                <div class="spec-section">
                    <h3 class="spec-section-title">SAR Değerleri</h3>
                    <table class="table spec-table">
                        <tbody>
                            @if (phone.SarHead.HasValue)
                            {
                                <tr><th>SAR Değeri (Baş)</th><td>@phone.SarHead.Value.ToString("0.##") W/kg</td></tr>
                            }
                            @if (phone.SarBody.HasValue)
                            {
                                <tr><th>SAR Değeri (Vücut)</th><td>@phone.SarBody.Value.ToString("0.##") W/kg</td></tr>
                            }
                        </tbody>
                    </table>
                </div>
            }

            <!-- KUTU İÇERİĞİ -->
            @if (!string.IsNullOrEmpty(phone.BoxContents))
            {
                <div class="spec-section">
                    <h3 class="spec-section-title">Kutu İçeriği</h3>
                    <table class="table spec-table">
                        <tbody>
                            <tr><th>Kutu İçeriği</th><td>@RenderAsList(phone.BoxContents)</td></tr>
                        </tbody>
                    </table>
                </div>
            }

        </div>
    </div>

    @if (Model.SameBrandPhones.Count > 0)
    {
        <section class="same-brand-phones mt-5 pt-4 border-top" aria-label="Aynı markanın diğer modelleri">
            <h2 class="same-brand-title mb-3">@brand.Name'ın Son Çıkan Modelleri</h2>
            <div class="row g-4">
                @foreach (var p in Model.SameBrandPhones)
                {
                    <article class="col-6 col-md-4 col-lg-2">
                        <a href="/@p.Slug" class="text-decoration-none">
                            <div class="phone-card same-brand-card">
                                <div class="phone-card-img">
                                    @if (!string.IsNullOrEmpty(p.MainImageUrl))
                                    {
                                        <img src="@p.MainImageUrl" alt="@p.BrandName @p.ModelName" width="150" height="180" loading="lazy" />
                                    }
                                    else
                                    {
                                        <div class="phone-card-placeholder">
                                            <span>Görsel Yok</span>
                                        </div>
                                    }
                                </div>
                                <div class="phone-card-body">
                                    <h3 class="phone-card-title">@p.ModelName</h3>
                                    <div class="phone-card-specs">
                                        @if (p.ScreenSize.HasValue) { <span class="spec-chip">@p.ScreenSize"</span> }
                                        @if (!string.IsNullOrEmpty(p.Cam1Res)) { <span class="spec-chip">@p.Cam1Res</span> }
                                        @if (p.BatteryCapacity.HasValue) { <span class="spec-chip">@p.BatteryCapacity mAh</span> }
                                    </div>
                                </div>
                            </div>
                        </a>
                    </article>
                }
            </div>
        </section>
    }
</article>

<style>
    .phone-main-image {
        max-height: 400px;
        object-fit: contain;
        border-radius: 12px;
    }

    .phone-placeholder {
        width: 100%;
        height: 350px;
        background: #f0f0f0;
        border-radius: 12px;
        border: 2px dashed #ccc;
    }

    .phone-header-card {
        background: white;
        padding: 1.5rem 2rem;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        height: 100%;
    }

    .phone-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: #1a1a2e;
        margin-bottom: 0.25rem;
    }

    .brand-logo {
        height: 28px;
        object-fit: contain;
    }

    .quick-specs {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    .quick-spec-badge {
        display: inline-block;
        background: #e8f4fd;
        color: #0d6efd;
        padding: 0.35rem 0.75rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 500;
    }

    .spec-section {
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        margin-bottom: 1.25rem;
        overflow: hidden;
    }

    .spec-section-title {
        font-size: 1.1rem;
        font-weight: 600;
        color: white;
        background: linear-gradient(135deg, #1a1a2e, #16213e);
        padding: 0.75rem 1.25rem;
        margin: 0;
    }

    .spec-table {
        margin: 0;
    }

    .spec-table th {
        width: 40%;
        font-weight: 500;
        color: #555;
        background: #fafafa;
        padding: 0.65rem 1.25rem;
        border-bottom: 1px solid #eee;
        vertical-align: middle;
    }

    .spec-table td {
        padding: 0.65rem 1.25rem;
        border-bottom: 1px solid #eee;
        color: #333;
        vertical-align: middle;
    }

    .spec-table tr:last-child th,
    .spec-table tr:last-child td {
        border-bottom: none;
    }

    .breadcrumb {
        background: transparent;
        padding: 0;
    }

    .breadcrumb a {
        color: #0d6efd;
        text-decoration: none;
    }

    .breadcrumb a:hover {
        text-decoration: underline;
    }

    .same-brand-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #1a1a2e;
    }

    .same-brand-phones .phone-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        height: 100%;
    }

    .same-brand-phones .phone-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }

    .same-brand-phones .phone-card-img {
        width: 100%;
        height: 140px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f8f9fa;
        padding: 0.75rem;
    }

    .same-brand-phones .phone-card-img img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }

    .same-brand-phones .phone-card-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #aaa;
        font-size: 0.75rem;
        border: 2px dashed #ddd;
        border-radius: 8px;
    }

    .same-brand-phones .phone-card-body {
        padding: 0.5rem 0.75rem 0.75rem;
    }

    .same-brand-phones .phone-card-title {
        font-size: 0.9rem;
        font-weight: 600;
        color: #1a1a2e;
        margin: 0;
        line-height: 1.3;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .same-brand-phones .phone-card-specs {
        display: flex;
        flex-wrap: wrap;
        gap: 0.25rem;
        margin-top: 0.35rem;
    }

    .same-brand-phones .spec-chip {
        display: inline-block;
        background: #f0f4f8;
        color: #555;
        padding: 0.15rem 0.4rem;
        border-radius: 6px;
        font-size: 0.7rem;
        font-weight: 500;
    }

    @@media (max-width: 768px) {
        .phone-title {
            font-size: 1.4rem;
        }

        .spec-table th {
            width: 45%;
            padding: 0.5rem 0.75rem;
            font-size: 0.9rem;
        }

        .spec-table td {
            padding: 0.5rem 0.75rem;
            font-size: 0.9rem;
        }

        .phone-header-card {
            padding: 1rem 1.25rem;
        }

        .same-brand-phones .phone-card-img {
            height: 120px;
        }
    }
</style>
