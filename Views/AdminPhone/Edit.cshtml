@model TelefonOzellikleri.Models.Smartphone
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    var brandList = ViewData["BrandList"] as Microsoft.AspNetCore.Mvc.Rendering.SelectList;
    var seriesList = ViewData["SeriesList"] as Microsoft.AspNetCore.Mvc.Rendering.SelectList;
    var isNew = ViewData["IsNew"] as bool? ?? false;
}

@if (ViewData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @ViewData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

<form method="post" action="@(isNew ? "/derin/phones/create" : $"/derin/phones/edit/{Model.Id}")">
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="Id" />

    @if (!isNew)
    {
        <div class="mb-3">
            <label class="form-label">ID</label>
            <input asp-for="Id" class="form-control" readonly disabled style="max-width: 120px;" />
        </div>
    }

    <ul class="nav nav-tabs mb-3" id="phoneTabs" role="tablist">
        <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#tab-general">General</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-design">Design</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-display">Display</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-camera">Camera</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-processor">Processor</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-battery">Battery</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-connectivity">Connectivity</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-other">Other</a></li>
    </ul>

    <div class="tab-content">

        <div class="tab-pane fade show active" id="tab-general">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label asp-for="BrandId" class="form-label">Brand</label>
                            <select asp-for="BrandId" asp-items="brandList" class="form-select"></select>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="SeriesId" class="form-label">Series</label>
                            <select asp-for="SeriesId" asp-items="seriesList" class="form-select">
                                <option value="">-- No Series --</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="ModelName" class="form-label">Model Name</label>
                            <input asp-for="ModelName" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="Slug" class="form-label">Slug</label>
                            <input asp-for="Slug" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="MainImageUrl" class="form-label">Main Image URL</label>
                            <input asp-for="MainImageUrl" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="ReleaseDate" class="form-label">Release Date</label>
                            <input asp-for="ReleaseDate" type="date" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="OsVersion" class="form-label">OS Version</label>
                            <input asp-for="OsVersion" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="UpdateGuarantee" class="form-label">Update Guarantee</label>
                            <input asp-for="UpdateGuarantee" class="form-control" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-design">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label asp-for="Height" class="form-label">Height (mm)</label>
                            <input asp-for="Height" type="number" step="0.1" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="Width" class="form-label">Width (mm)</label>
                            <input asp-for="Width" type="number" step="0.1" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="Thickness" class="form-label">Thickness (mm)</label>
                            <input asp-for="Thickness" type="number" step="0.1" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="Weight" class="form-label">Weight (g)</label>
                            <input asp-for="Weight" type="number" step="0.1" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="FrameMaterial" class="form-label">Frame Material</label>
                            <input asp-for="FrameMaterial" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="BackMaterial" class="form-label">Back Material</label>
                            <input asp-for="BackMaterial" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="ScreenProtection" class="form-label">Screen Protection</label>
                            <input asp-for="ScreenProtection" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="DustWaterRes" class="form-label">Dust/Water Resistance</label>
                            <input asp-for="DustWaterRes" class="form-control" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-display">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="ScreenSize" class="form-label">Screen Size (inch)</label>
                            <input asp-for="ScreenSize" type="number" step="0.01" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ScreenTech" class="form-label">Screen Technology</label>
                            <input asp-for="ScreenTech" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ScreenRes" class="form-label">Resolution</label>
                            <input asp-for="ScreenRes" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="RefreshRate" class="form-label">Refresh Rate (Hz)</label>
                            <input asp-for="RefreshRate" type="number" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="PixelDensity" class="form-label">Pixel Density (ppi)</label>
                            <input asp-for="PixelDensity" type="number" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ScreenBodyRatio" class="form-label">Screen-to-Body Ratio (%)</label>
                            <input asp-for="ScreenBodyRatio" type="number" step="0.1" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ScreenBrightnessNits" class="form-label">Brightness (nits)</label>
                            <input asp-for="ScreenBrightnessNits" type="number" class="form-control" />
                        </div>
                        <div class="col-md-8">
                            <label class="form-label">Extra Features</label>
                            <input type="text" name="ScreenExtraFeaturesRaw" class="form-control" placeholder="Comma separated (e.g. HDR10+, Dolby Vision, Always-On)" value="@(Model.ScreenExtraFeatures != null ? string.Join(", ", Model.ScreenExtraFeatures) : "")" />
                            <small class="text-muted">Enter features separated by commas</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-camera">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h6 class="fw-bold mb-3">Main Camera</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input asp-for="Cam1Exists" class="form-check-input" />
                                <label asp-for="Cam1Exists" class="form-check-label">Exists</label>
                            </div>
                        </div>
                        <div class="col-md-2"><label asp-for="Cam1Res" class="form-label">Resolution</label><input asp-for="Cam1Res" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam1Aperture" class="form-label">Aperture</label><input asp-for="Cam1Aperture" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam1Focal" class="form-label">Focal</label><input asp-for="Cam1Focal" class="form-control" /></div>
                        <div class="col-md-4"><label asp-for="Cam1Features" class="form-label">Features</label><input asp-for="Cam1Features" class="form-control" /></div>
                    </div>

                    <h6 class="fw-bold mb-3">2nd Camera</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input asp-for="Cam2Exists" class="form-check-input" />
                                <label asp-for="Cam2Exists" class="form-check-label">Exists</label>
                            </div>
                        </div>
                        <div class="col-md-2"><label asp-for="Cam2Type" class="form-label">Type</label><input asp-for="Cam2Type" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam2Res" class="form-label">Resolution</label><input asp-for="Cam2Res" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam2Aperture" class="form-label">Aperture</label><input asp-for="Cam2Aperture" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam2Focal" class="form-label">Focal</label><input asp-for="Cam2Focal" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam2Features" class="form-label">Features</label><input asp-for="Cam2Features" class="form-control" /></div>
                    </div>

                    <h6 class="fw-bold mb-3">3rd Camera</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input asp-for="Cam3Exists" class="form-check-input" />
                                <label asp-for="Cam3Exists" class="form-check-label">Exists</label>
                            </div>
                        </div>
                        <div class="col-md-2"><label asp-for="Cam3Type" class="form-label">Type</label><input asp-for="Cam3Type" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam3Res" class="form-label">Resolution</label><input asp-for="Cam3Res" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam3Aperture" class="form-label">Aperture</label><input asp-for="Cam3Aperture" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam3Focal" class="form-label">Focal</label><input asp-for="Cam3Focal" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam3Features" class="form-label">Features</label><input asp-for="Cam3Features" class="form-control" /></div>
                    </div>

                    <h6 class="fw-bold mb-3">4th Camera</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input asp-for="Cam4Exists" class="form-check-input" />
                                <label asp-for="Cam4Exists" class="form-check-label">Exists</label>
                            </div>
                        </div>
                        <div class="col-md-2"><label asp-for="Cam4Type" class="form-label">Type</label><input asp-for="Cam4Type" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam4Res" class="form-label">Resolution</label><input asp-for="Cam4Res" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam4Aperture" class="form-label">Aperture</label><input asp-for="Cam4Aperture" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam4Focal" class="form-label">Focal</label><input asp-for="Cam4Focal" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="Cam4Features" class="form-label">Features</label><input asp-for="Cam4Features" class="form-control" /></div>
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <label asp-for="RearVideoRes" class="form-label">Rear Video Resolution</label>
                            <input asp-for="RearVideoRes" class="form-control" />
                        </div>
                    </div>

                    <hr />
                    <h6 class="fw-bold mb-3">Front Camera</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input asp-for="FrontExists" class="form-check-input" />
                                <label asp-for="FrontExists" class="form-check-label">Exists</label>
                            </div>
                        </div>
                        <div class="col-md-2"><label asp-for="FrontCamRes" class="form-label">Resolution</label><input asp-for="FrontCamRes" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="FrontCamAperture" class="form-label">Aperture</label><input asp-for="FrontCamAperture" class="form-control" /></div>
                        <div class="col-md-2"><label asp-for="FrontCamFocal" class="form-label">Focal</label><input asp-for="FrontCamFocal" class="form-control" /></div>
                        <div class="col-md-4"><label asp-for="FrontCamFeatures" class="form-label">Features</label><input asp-for="FrontCamFeatures" class="form-control" /></div>
                    </div>
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="FrontVideoRes" class="form-label">Front Video Resolution</label>
                            <input asp-for="FrontVideoRes" class="form-control" />
                        </div>
                        <div class="col-md-2">
                            <div class="form-check mt-4">
                                <input asp-for="SecondFrontExists" class="form-check-input" />
                                <label asp-for="SecondFrontExists" class="form-check-label">2nd Front</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="SecondFrontRes" class="form-label">2nd Front Camera Resolution</label>
                            <input asp-for="SecondFrontRes" class="form-control" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-processor">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="Chipset" class="form-label">Chipset</label>
                            <input asp-for="Chipset" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="Cpu" class="form-label">CPU</label>
                            <input asp-for="Cpu" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="Gpu" class="form-label">GPU</label>
                            <input asp-for="Gpu" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="AntutuScore" class="form-label">AnTuTu Score</label>
                            <input asp-for="AntutuScore" type="number" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="GeekbenchScore" class="form-label">Geekbench Score</label>
                            <input asp-for="GeekbenchScore" class="form-control" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-battery">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="BatteryCapacity" class="form-label">Battery (mAh)</label>
                            <input asp-for="BatteryCapacity" type="number" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ChargingSpeed" class="form-label">Wired Charging (W)</label>
                            <input asp-for="ChargingSpeed" type="number" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <div class="form-check mt-4">
                                <input asp-for="WirelessCharging" class="form-check-input" />
                                <label asp-for="WirelessCharging" class="form-check-label">Wireless Charging</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="WirelessSpeed" class="form-label">Wireless Charging (W)</label>
                            <input asp-for="WirelessSpeed" type="number" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <div class="form-check mt-4">
                                <input asp-for="ReverseWireless" class="form-check-input" />
                                <label asp-for="ReverseWireless" class="form-check-label">Reverse Wireless</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="ReverseSpeed" class="form-label">Reverse Speed (W)</label>
                            <input asp-for="ReverseSpeed" type="number" class="form-control" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-connectivity">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <div class="form-check">
                                <input asp-for="Support5g" class="form-check-input" />
                                <label asp-for="Support5g" class="form-check-label">5G</label>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-check">
                                <input asp-for="Support4g" class="form-check-input" />
                                <label asp-for="Support4g" class="form-check-label">4G</label>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-check">
                                <input asp-for="Nfc" class="form-check-input" />
                                <label asp-for="Nfc" class="form-check-label">NFC</label>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-check">
                                <input asp-for="Gps" class="form-check-input" />
                                <label asp-for="Gps" class="form-check-label">GPS</label>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-check">
                                <input asp-for="IrBlaster" class="form-check-input" />
                                <label asp-for="IrBlaster" class="form-check-label">IR Blaster</label>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <label asp-for="BluetoothVer" class="form-label">Bluetooth</label>
                            <input asp-for="BluetoothVer" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="UsbType" class="form-label">USB Type</label>
                            <input asp-for="UsbType" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <label asp-for="UsbVersion" class="form-label">USB Version</label>
                            <input asp-for="UsbVersion" class="form-control" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-other">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <div class="form-check">
                                <input asp-for="HasAiFeatures" class="form-check-input" />
                                <label asp-for="HasAiFeatures" class="form-check-label">AI Features</label>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <label asp-for="AiFeaturesList" class="form-label">AI Features List</label>
                            <textarea asp-for="AiFeaturesList" class="form-control" rows="2"></textarea>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="SpeakerType" class="form-label">Speaker Type</label>
                            <input asp-for="SpeakerType" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <div class="form-check mt-4">
                                <input asp-for="HeadphoneJack35mm" class="form-check-input" />
                                <label asp-for="HeadphoneJack35mm" class="form-check-label">3.5mm Jack</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-check mt-4">
                                <input asp-for="EsimSupport" class="form-check-input" />
                                <label asp-for="EsimSupport" class="form-check-label">eSIM Support</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="PhysicalSimCount" class="form-label">Physical SIM Count</label>
                            <input asp-for="PhysicalSimCount" type="number" class="form-control" />
                        </div>
                        <div class="col-md-8">
                            <label asp-for="SensorsList" class="form-label">Sensors</label>
                            <textarea asp-for="SensorsList" class="form-control" rows="2"></textarea>
                        </div>
                        <div class="col-md-12">
                            <label asp-for="BoxContents" class="form-label">Box Contents</label>
                            <textarea asp-for="BoxContents" class="form-control" rows="2"></textarea>
                        </div>
                        <div class="col-md-12">
                            <label class="form-label">Colors</label>
                            <input type="text" name="ColorsRaw" class="form-control" placeholder="Comma separated (e.g. Black, White, Blue)" value="@(Model.Colors != null ? string.Join(", ", Model.Colors) : "")" />
                            <small class="text-muted">Enter colors separated by commas</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="d-flex justify-content-between mt-4 mb-4">
        <a href="/derin/phones" class="btn btn-outline-secondary">Back</a>
        <button type="submit" class="btn btn-primary px-4">@(isNew ? "Create" : "Save")</button>
    </div>
</form>

<style>
    .nav-tabs .nav-link {
        color: #555;
        font-weight: 500;
        font-size: 0.9rem;
    }

    .nav-tabs .nav-link.active {
        color: #1a1a2e;
        font-weight: 600;
        border-color: #dee2e6 #dee2e6 #fff;
    }

    .form-label {
        font-weight: 500;
        font-size: 0.85rem;
        color: #555;
    }

    .card {
        border-radius: 12px;
    }
</style>
